version: '3'
services:
  node:
    restart: always
    build: .
    ports:
      - 80:3000
    volumes:
      - ./:/code
  mongo:
    image: mongo
    container_name: profile_mongodb
    environment:
      - MONGO_INTIDB_DATABASE=profiles
      - MONGO_INTIDB_ROOT_USERNAME=setup
      - MONGO_INTIDB_ROOT_PASSWORD=allyourbasearebelongtous
    ports:
      - 27017:27017
    volumes:
      - mongodb:/data/db
      - ./init-mongo.js:/docker-entrypoint-initdb.d/init-mongodb.js:ro
volumes:
 mongodb:
